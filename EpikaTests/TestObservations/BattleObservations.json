{
  "version": "1.0",
  "description": "戦闘システムのテスト観点一覧",
  "confidenceInterval": "99%",
  "defaultTolerance": "±2%",
  "observations": [
    {
      "id": "BATTLE-RANDOM-001",
      "category": ["戦闘", "乱数", "statMultiplier"],
      "description": "luck=1のstatMultiplier平均値が期待範囲内か",
      "formula": "(0.41 + 1.00) / 2 = 0.705",
      "expectedRange": { "min": 0.691, "max": 0.719 },
      "toleranceBasis": "期待値0.705の±2%、99%信頼区間、964回試行",
      "testFile": "BattleRandomSystemTests.swift",
      "testMethod": "testStatMultiplierAverageLuck1"
    },
    {
      "id": "BATTLE-RANDOM-002",
      "category": ["戦闘", "乱数", "statMultiplier"],
      "description": "luck=18のstatMultiplier平均値が期待範囲内か",
      "formula": "(0.58 + 1.00) / 2 = 0.79",
      "expectedRange": { "min": 0.774, "max": 0.806 },
      "toleranceBasis": "期待値0.79の±2%、99%信頼区間、389回試行",
      "testFile": "BattleRandomSystemTests.swift",
      "testMethod": "testStatMultiplierAverageLuck18"
    },
    {
      "id": "BATTLE-RANDOM-003",
      "category": ["戦闘", "乱数", "statMultiplier"],
      "description": "luck=35のstatMultiplier平均値が期待範囲内か",
      "formula": "(0.75 + 1.00) / 2 = 0.875",
      "expectedRange": { "min": 0.858, "max": 0.893 },
      "toleranceBasis": "期待値0.875の±2%、99%信頼区間、115回試行",
      "testFile": "BattleRandomSystemTests.swift",
      "testMethod": "testStatMultiplierAverageLuck35"
    },
    {
      "id": "BATTLE-RANDOM-004",
      "category": ["戦闘", "乱数", "percentChance"],
      "description": "発動率100%で必ず発動するか",
      "formula": "100回中100回発動",
      "expectedRange": { "min": 100, "max": 100 },
      "toleranceBasis": "決定的（100%は100%）",
      "testFile": "ReactionSkillTests.swift",
      "testMethod": "testReactionChance100Percent"
    },
    {
      "id": "BATTLE-RANDOM-005",
      "category": ["戦闘", "乱数", "percentChance"],
      "description": "発動率0%で発動しないか",
      "formula": "100回中0回発動",
      "expectedRange": { "min": 0, "max": 0 },
      "toleranceBasis": "決定的（0%は0%）",
      "testFile": "ReactionSkillTests.swift",
      "testMethod": "testReactionChance0Percent"
    },
    {
      "id": "BATTLE-RANDOM-006",
      "category": ["戦闘", "乱数", "percentChance"],
      "description": "発動率50%の発動回数が統計的に妥当か",
      "formula": "4148回中約2074回発動",
      "expectedRange": { "min": 1991, "max": 2157 },
      "toleranceBasis": "99%信頼区間、4148回試行、±2%許容",
      "testFile": "ReactionSkillTests.swift",
      "testMethod": "testReactionChance50PercentStatistical"
    },
    {
      "id": "BATTLE-PHYS-001",
      "category": ["戦闘", "ダメージ計算", "物理"],
      "description": "物理ダメージの平均値が期待範囲内か（luck=1）",
      "formula": "attack×0.705 - defense×0.705 = (attack-defense)×0.705",
      "expectedRange": { "min": 2073, "max": 2157 },
      "toleranceBasis": "期待値2115の±2%、99%信頼区間",
      "testFile": "PhysicalDamageCalculationTests.swift",
      "testMethod": "testPhysicalDamageAverageLuck1"
    },
    {
      "id": "BATTLE-PHYS-002",
      "category": ["戦闘", "ダメージ計算", "物理"],
      "description": "物理ダメージの平均値が期待範囲内か（luck=18）",
      "formula": "attack×0.79 - defense×0.79 = (attack-defense)×0.79",
      "expectedRange": { "min": 2323, "max": 2417 },
      "toleranceBasis": "期待値2370の±2%、99%信頼区間",
      "testFile": "PhysicalDamageCalculationTests.swift",
      "testMethod": "testPhysicalDamageAverageLuck18"
    },
    {
      "id": "BATTLE-PHYS-003",
      "category": ["戦闘", "ダメージ計算", "物理"],
      "description": "物理ダメージの平均値が期待範囲内か（luck=35）",
      "formula": "attack×0.875 - defense×0.875 = (attack-defense)×0.875",
      "expectedRange": { "min": 2573, "max": 2678 },
      "toleranceBasis": "期待値2625の±2%、99%信頼区間",
      "testFile": "PhysicalDamageCalculationTests.swift",
      "testMethod": "testPhysicalDamageAverageLuck35"
    },
    {
      "id": "BATTLE-PHYS-004",
      "category": ["戦闘", "ダメージ計算", "物理", "エッジケース"],
      "description": "防御力0の時にフルダメージが出るか",
      "formula": "attack × statMultiplier（防御による軽減なし）",
      "expectedRange": { "min": 1, "max": null },
      "toleranceBasis": "ダメージ > 0 であること",
      "testFile": "PhysicalDamageCalculationTests.swift",
      "testMethod": "testZeroDefense_FullDamage"
    },
    {
      "id": "BATTLE-PHYS-005",
      "category": ["戦闘", "ダメージ計算", "物理", "エッジケース"],
      "description": "防御力が攻撃力を上回る時に最低ダメージが出るか",
      "formula": "max(1, 計算結果)",
      "expectedRange": { "min": 1, "max": 1 },
      "toleranceBasis": "最低ダメージ保証",
      "testFile": "PhysicalDamageCalculationTests.swift",
      "testMethod": "testHighDefense_MinimumDamage"
    },
    {
      "id": "BATTLE-MAGIC-001",
      "category": ["戦闘", "ダメージ計算", "魔法"],
      "description": "魔法ダメージの平均値が期待範囲内か",
      "formula": "magicPower × spellPower × statMultiplier",
      "expectedRange": { "min": null, "max": null },
      "toleranceBasis": "期待値の±2%、99%信頼区間",
      "testFile": "MagicalDamageCalculationTests.swift",
      "testMethod": "testMagicalDamageAverage"
    },
    {
      "id": "BATTLE-BREATH-001",
      "category": ["戦闘", "ダメージ計算", "ブレス"],
      "description": "ブレスダメージの平均値が期待範囲内か",
      "formula": "breathPower × statMultiplier",
      "expectedRange": { "min": null, "max": null },
      "toleranceBasis": "期待値の±2%、99%信頼区間",
      "testFile": "BreathDamageCalculationTests.swift",
      "testMethod": "testBreathDamageAverage"
    },
    {
      "id": "BATTLE-BARRIER-001",
      "category": ["戦闘", "防御", "バリア"],
      "description": "物理バリアがダメージを無効化するか",
      "formula": "バリア回数分のダメージが0になる",
      "expectedRange": { "min": 0, "max": 0 },
      "toleranceBasis": "決定的（バリア発動中はダメージ0）",
      "testFile": "BarrierGuardTests.swift",
      "testMethod": "testPhysicalBarrierBlocksDamage"
    },
    {
      "id": "BATTLE-BARRIER-002",
      "category": ["戦闘", "防御", "バリア"],
      "description": "魔法バリアがダメージを無効化するか",
      "formula": "バリア回数分のダメージが0になる",
      "expectedRange": { "min": 0, "max": 0 },
      "toleranceBasis": "決定的（バリア発動中はダメージ0）",
      "testFile": "BarrierGuardTests.swift",
      "testMethod": "testMagicalBarrierBlocksDamage"
    },
    {
      "id": "BATTLE-GUARD-001",
      "category": ["戦闘", "防御", "ガード"],
      "description": "物理ガードがダメージを軽減するか",
      "formula": "ダメージ × (1 - guardRate)",
      "expectedRange": { "min": null, "max": null },
      "toleranceBasis": "期待値の±2%",
      "testFile": "BarrierGuardTests.swift",
      "testMethod": "testPhysicalGuardReducesDamage"
    },
    {
      "id": "BATTLE-CRIT-001",
      "category": ["戦闘", "必殺", "発動率"],
      "description": "必殺発動率が期待範囲内か",
      "formula": "criticalChancePercent / 100",
      "expectedRange": { "min": null, "max": null },
      "toleranceBasis": "99%信頼区間、±2%許容",
      "testFile": "CriticalHitTests.swift",
      "testMethod": "testCriticalRateStatistical"
    },
    {
      "id": "BATTLE-CRIT-002",
      "category": ["戦闘", "必殺", "ダメージ倍率"],
      "description": "必殺ダメージが正しく増加するか",
      "formula": "baseDamage × criticalMultiplier",
      "expectedRange": { "min": null, "max": null },
      "toleranceBasis": "期待値の±2%",
      "testFile": "CriticalHitTests.swift",
      "testMethod": "testCriticalDamageMultiplier"
    },
    {
      "id": "BATTLE-HIT-001",
      "category": ["戦闘", "命中", "命中率"],
      "description": "命中率が期待範囲内か",
      "formula": "hitChance - evasion",
      "expectedRange": { "min": null, "max": null },
      "toleranceBasis": "99%信頼区間、±2%許容",
      "testFile": "HitCalculationTests.swift",
      "testMethod": "testHitRateStatistical"
    },
    {
      "id": "BATTLE-REACTION-001",
      "category": ["戦闘", "スキル", "反撃"],
      "description": "反撃が発動してダメージを与えるか",
      "formula": "被弾時に100%発動、ダメージ > 0",
      "expectedRange": { "min": 1, "max": null },
      "toleranceBasis": "反撃ダメージが発生すること",
      "testFile": "ReactionSkillTests.swift",
      "testMethod": "testReactionAttackTriggersAndDealsDamage"
    },
    {
      "id": "BATTLE-REACTION-002",
      "category": ["戦闘", "スキル", "反撃"],
      "description": "attackCountMultiplier=0.3で1回あたりのダメージが減少するか",
      "formula": "multiplier=0.3の平均ダメージ < multiplier=1.0の平均ダメージ",
      "expectedRange": { "min": null, "max": null },
      "toleranceBasis": "相対比較（0.3 < 1.0）",
      "testFile": "ReactionSkillTests.swift",
      "testMethod": "testAttackCountMultiplierReducesDamage"
    },
    {
      "id": "BATTLE-REACTION-003",
      "category": ["戦闘", "スキル", "反撃"],
      "description": "魔法ダメージ時に反撃が発動してダメージを与えるか",
      "formula": "selfDamagedMagical 100%発動、ダメージ > 0",
      "expectedRange": { "min": 1, "max": null },
      "toleranceBasis": "反撃ダメージが発生すること",
      "testFile": "ReactionSkillTests.swift",
      "testMethod": "testReactionTriggersOnMagicalDamage"
    },
    {
      "id": "BATTLE-REACTION-004",
      "category": ["戦闘", "スキル", "反撃"],
      "description": "物理回避時に反撃が発動してダメージを与えるか",
      "formula": "selfEvadePhysical 100%発動、ダメージ > 0",
      "expectedRange": { "min": 1, "max": null },
      "toleranceBasis": "反撃ダメージが発生すること",
      "testFile": "ReactionSkillTests.swift",
      "testMethod": "testReactionTriggersOnEvade"
    },
    {
      "id": "BATTLE-REACTION-005",
      "category": ["戦闘", "スキル", "追撃"],
      "description": "味方が物理ダメージを受けた時に追撃が発動してダメージを与えるか",
      "formula": "allyDamagedPhysical 100%発動、ダメージ > 0",
      "expectedRange": { "min": 1, "max": null },
      "toleranceBasis": "追撃ダメージが発生すること",
      "testFile": "ReactionSkillTests.swift",
      "testMethod": "testReactionTriggersOnAllyDamagedPhysical"
    },
    {
      "id": "BATTLE-REACTION-006",
      "category": ["戦闘", "スキル", "報復"],
      "description": "味方が倒された時に報復が発動してダメージを与えるか",
      "formula": "allyDefeated 100%発動、ダメージ > 0",
      "expectedRange": { "min": 1, "max": null },
      "toleranceBasis": "報復ダメージが発生すること",
      "testFile": "ReactionSkillTests.swift",
      "testMethod": "testReactionTriggersOnAllyDefeated"
    },
    {
      "id": "BATTLE-REACTION-007",
      "category": ["戦闘", "スキル", "追撃"],
      "description": "敵撃破時に追撃が発動してダメージを与えるか",
      "formula": "selfKilledEnemy 100%発動、ダメージ > 0",
      "expectedRange": { "min": 1, "max": null },
      "toleranceBasis": "追撃ダメージが発生すること",
      "testFile": "ReactionSkillTests.swift",
      "testMethod": "testReactionTriggersOnSelfKilledEnemy"
    },
    {
      "id": "BATTLE-REACTION-008",
      "category": ["戦闘", "スキル", "追撃"],
      "description": "味方の魔法攻撃で追撃が発動してダメージを与えるか",
      "formula": "allyMagicAttack 100%発動、ダメージ > 0",
      "expectedRange": { "min": 1, "max": null },
      "toleranceBasis": "追撃ダメージが発生すること",
      "testFile": "ReactionSkillTests.swift",
      "testMethod": "testReactionTriggersOnAllyMagicAttack"
    },
    {
      "id": "BATTLE-REACTION-009",
      "category": ["戦闘", "スキル", "再攻撃"],
      "description": "行動不能中の反撃では通常行動/追加行動が発生しないか",
      "formula": "actionLocked + reaction -> normalActionCount == 0",
      "expectedRange": { "min": 0, "max": 0 },
      "toleranceBasis": "行動不能中は通常行動が発生しないこと",
      "testFile": "ReactionSkillTests.swift",
      "testMethod": "testExtraActionDoesNotTriggerFromReaction"
    },
    {
      "id": "BATTLE-REACTION-010",
      "category": ["戦闘", "スキル", "格闘追撃"],
      "description": "格闘追撃が発動するか",
      "formula": "martial eligible + strength=100 -> followUpCount >= 1",
      "expectedRange": { "min": 1, "max": null },
      "toleranceBasis": "格闘追撃が発生すること",
      "testFile": "ReactionSkillTests.swift",
      "testMethod": "testMartialFollowUpTriggers"
    },
    {
      "id": "BATTLE-REACTION-011",
      "category": ["戦闘", "スキル", "反撃"],
      "description": "反撃が反撃を呼ばない（連鎖抑止）",
      "formula": "reactionCount == 1",
      "expectedRange": { "min": 1, "max": 1 },
      "toleranceBasis": "反撃が1回で止まること",
      "testFile": "ReactionSkillTests.swift",
      "testMethod": "testReactionDoesNotChainFromReactionAttack"
    },
    {
      "id": "BATTLE-RESCUE-001",
      "category": ["戦闘", "救出"],
      "description": "救出が発動し、報復/追撃が取り消されないか",
      "formula": "min(rescueCount, enemyReactionCount, playerReactionCount) >= 1",
      "expectedRange": { "min": 1, "max": null },
      "toleranceBasis": "救出と双方のリアクションが発動すること",
      "testFile": "ReactionSkillTests.swift",
      "testMethod": "testRescueTriggersAndDoesNotCancelReactions"
    },
    {
      "id": "BATTLE-RESCUE-002",
      "category": ["戦闘", "救出"],
      "description": "リアクションによる撃破でも救出が発動するか",
      "formula": "min(rescueCount, reactionCount) >= 1",
      "expectedRange": { "min": 1, "max": null },
      "toleranceBasis": "反撃発生中でも救出が行われること",
      "testFile": "ReactionSkillTests.swift",
      "testMethod": "testRescueTriggersDuringReactionKill"
    },
    {
      "id": "BATTLE-STATUS-001",
      "category": ["戦闘", "状態異常", "付与"],
      "description": "状態異常が正しく付与されるか",
      "formula": "付与率に応じた確率で付与",
      "expectedRange": { "min": null, "max": null },
      "toleranceBasis": "99%信頼区間、±2%許容",
      "testFile": "StatusEffectTests.swift",
      "testMethod": "testStatusEffectApplication"
    },
    {
      "id": "BATTLE-STATUS-002",
      "category": ["戦闘", "状態異常", "持続"],
      "description": "状態異常が指定ターン後に解除されるか",
      "formula": "duration ターン後に解除",
      "expectedRange": { "min": null, "max": null },
      "toleranceBasis": "決定的（指定ターンで解除）",
      "testFile": "StatusEffectTests.swift",
      "testMethod": "testStatusEffectDuration"
    },
    {
      "id": "BATTLE-STAT-001",
      "category": ["戦闘", "ステータス", "基礎"],
      "description": "baseline maxHP が計算式通りか",
      "formula": "VIT16 × (1 + 0.1 × c_maxHP=1) × 10 = 176",
      "expectedRange": { "min": 176, "max": 176 },
      "toleranceBasis": "決定的（固定入力の算出値）",
      "testFile": "CombatStatCalculatorObservationTests.swift",
      "testMethod": "testCombatStatBaselineScenario"
    },
    {
      "id": "BATTLE-STAT-002",
      "category": ["戦闘", "ステータス", "基礎"],
      "description": "baseline physicalAttackScore が計算式通りか",
      "formula": "STR10 × (1 + 0.1 × c_physicalAttackScore=1) = 11",
      "expectedRange": { "min": 11, "max": 11 },
      "toleranceBasis": "決定的（固定入力の算出値）",
      "testFile": "CombatStatCalculatorObservationTests.swift",
      "testMethod": "testCombatStatBaselineScenario"
    },
    {
      "id": "BATTLE-STAT-003",
      "category": ["戦闘", "ステータス", "基礎"],
      "description": "baseline magicalAttackScore が計算式通りか",
      "formula": "WIS12 × 1.1 = 13.2 → trunc 13",
      "expectedRange": { "min": 13, "max": 13 },
      "toleranceBasis": "決定的（固定入力の算出値）",
      "testFile": "CombatStatCalculatorObservationTests.swift",
      "testMethod": "testCombatStatBaselineScenario"
    },
    {
      "id": "BATTLE-STAT-004",
      "category": ["戦闘", "ステータス", "基礎"],
      "description": "baseline physicalDefenseScore が計算式通りか",
      "formula": "VIT16 × 1.1 = 17.6 → trunc 17",
      "expectedRange": { "min": 17, "max": 17 },
      "toleranceBasis": "決定的（固定入力の算出値）",
      "testFile": "CombatStatCalculatorObservationTests.swift",
      "testMethod": "testCombatStatBaselineScenario"
    },
    {
      "id": "BATTLE-STAT-005",
      "category": ["戦闘", "ステータス", "基礎"],
      "description": "baseline magicalDefenseScore が計算式通りか",
      "formula": "SPR14 × 1.1 = 15.4 → trunc 15",
      "expectedRange": { "min": 15, "max": 15 },
      "toleranceBasis": "決定的（固定入力の算出値）",
      "testFile": "CombatStatCalculatorObservationTests.swift",
      "testMethod": "testCombatStatBaselineScenario"
    },
    {
      "id": "BATTLE-STAT-006",
      "category": ["戦闘", "ステータス", "基礎"],
      "description": "baseline hitScore が計算式通りか",
      "formula": "((STR10+AGI18)/2 × 1.1 + 50) × 2 = 130.8 → trunc 130",
      "expectedRange": { "min": 130, "max": 130 },
      "toleranceBasis": "決定的（固定入力の算出値）",
      "testFile": "CombatStatCalculatorObservationTests.swift",
      "testMethod": "testCombatStatBaselineScenario"
    },
    {
      "id": "BATTLE-STAT-007",
      "category": ["戦闘", "ステータス", "基礎"],
      "description": "baseline evasionScore が計算式通りか",
      "formula": "((AGI18+LUK20)/2 × 1.1) = 20.9 → trunc 20",
      "expectedRange": { "min": 20, "max": 20 },
      "toleranceBasis": "決定的（固定入力の算出値）",
      "testFile": "CombatStatCalculatorObservationTests.swift",
      "testMethod": "testCombatStatBaselineScenario"
    },
    {
      "id": "BATTLE-STAT-008",
      "category": ["戦闘", "ステータス", "基礎"],
      "description": "baseline criticalChancePercent が計算式通りか",
      "formula": "max(AGI18 + LUK20×2 - 45, 0) × 0.16 = 2.08 → trunc 2",
      "expectedRange": { "min": 2, "max": 2 },
      "toleranceBasis": "決定的（固定入力の算出値）",
      "testFile": "CombatStatCalculatorObservationTests.swift",
      "testMethod": "testCombatStatBaselineScenario"
    },
    {
      "id": "BATTLE-STAT-009",
      "category": ["戦闘", "ステータス", "基礎"],
      "description": "baseline attackCount が計算式通りか",
      "formula": "AGI18 → finalAttackCount = 1",
      "expectedRange": { "min": 1, "max": 1 },
      "toleranceBasis": "決定的（固定入力の算出値）",
      "testFile": "CombatStatCalculatorObservationTests.swift",
      "testMethod": "testCombatStatBaselineScenario"
    },
    {
      "id": "BATTLE-STAT-010",
      "category": ["戦闘", "ステータス", "基礎"],
      "description": "baseline magicalHealingScore が計算式通りか",
      "formula": "SPR14 × 1.1 × 2 = 30.8 → trunc 30",
      "expectedRange": { "min": 30, "max": 30 },
      "toleranceBasis": "決定的（固定入力の算出値）",
      "testFile": "CombatStatCalculatorObservationTests.swift",
      "testMethod": "testCombatStatBaselineScenario"
    },
    {
      "id": "BATTLE-STAT-011",
      "category": ["戦闘", "ステータス", "基礎"],
      "description": "baseline trapRemovalScore が計算式通りか",
      "formula": "((AGI18+LUK20)/2 × 1.1 × 0.5) = 10.45 → trunc 10",
      "expectedRange": { "min": 10, "max": 10 },
      "toleranceBasis": "決定的（固定入力の算出値）",
      "testFile": "CombatStatCalculatorObservationTests.swift",
      "testMethod": "testCombatStatBaselineScenario"
    },
    {
      "id": "BATTLE-STAT-012",
      "category": ["戦闘", "ステータス", "基礎"],
      "description": "baseline additionalDamageScore が計算式通りか",
      "formula": "dependency 5.0 × (1 + 0.025) × 0.32 = 1.64 → trunc 1",
      "expectedRange": { "min": 1, "max": 1 },
      "toleranceBasis": "決定的（固定入力の算出値）",
      "testFile": "CombatStatCalculatorObservationTests.swift",
      "testMethod": "testCombatStatBaselineScenario"
    },
    {
      "id": "BATTLE-STAT-013",
      "category": ["戦闘", "ステータス", "基礎"],
      "description": "baseline breathDamageScore が計算式通りか",
      "formula": "WIS12 × 1.1 = 13.2 → trunc 13",
      "expectedRange": { "min": 13, "max": 13 },
      "toleranceBasis": "決定的（固定入力の算出値）",
      "testFile": "CombatStatCalculatorObservationTests.swift",
      "testMethod": "testCombatStatBaselineScenario"
    },
    {
      "id": "BATTLE-STAT-101",
      "category": ["戦闘", "ステータス", "21以上ボーナス"],
      "description": "STR35のphysicalAttackScore増幅が正しいか",
      "formula": "trunc(35×1.1)=38; bonus=trunc(38×1.04^15)=68",
      "expectedRange": { "min": 68, "max": 68 },
      "toleranceBasis": "決定的（21以上ボーナス）",
      "testFile": "CombatStatCalculatorObservationTests.swift",
      "testMethod": "testCombatStatTwentyOneBonuses"
    },
    {
      "id": "BATTLE-STAT-102",
      "category": ["戦闘", "ステータス", "21以上ボーナス"],
      "description": "STR35のadditionalDamageScore増幅が正しいか",
      "formula": "raw 19.68 → trunc 19; bonus=trunc(19×1.04^15)=34",
      "expectedRange": { "min": 34, "max": 34 },
      "toleranceBasis": "決定的（21以上ボーナス）",
      "testFile": "CombatStatCalculatorObservationTests.swift",
      "testMethod": "testCombatStatTwentyOneBonuses"
    },
    {
      "id": "BATTLE-STAT-103",
      "category": ["戦闘", "ステータス", "21以上ボーナス"],
      "description": "WIS35のmagicalAttackScore増幅が正しいか",
      "formula": "trunc(35×1.1)=38; bonus=trunc(38×1.04^15)=68",
      "expectedRange": { "min": 68, "max": 68 },
      "toleranceBasis": "決定的（21以上ボーナス）",
      "testFile": "CombatStatCalculatorObservationTests.swift",
      "testMethod": "testCombatStatTwentyOneBonuses"
    },
    {
      "id": "BATTLE-STAT-104",
      "category": ["戦闘", "ステータス", "21以上ボーナス"],
      "description": "知恵35の21以上ボーナスが精神14由来の魔法回復力に適用されるか",
      "formula": "trunc(14×1.1×2)=30; bonus=trunc(30×1.04^15)=54",
      "expectedRange": { "min": 54, "max": 54 },
      "toleranceBasis": "決定的（21以上ボーナス）",
      "testFile": "CombatStatCalculatorObservationTests.swift",
      "testMethod": "testCombatStatTwentyOneBonuses"
    },
    {
      "id": "BATTLE-STAT-105",
      "category": ["戦闘", "ステータス", "21以上ボーナス"],
      "description": "WIS35のbreathDamageScore増幅が正しいか",
      "formula": "trunc(35×1.1)=38; bonus=trunc(38×1.04^15)=68",
      "expectedRange": { "min": 68, "max": 68 },
      "toleranceBasis": "決定的（21以上ボーナス）",
      "testFile": "CombatStatCalculatorObservationTests.swift",
      "testMethod": "testCombatStatTwentyOneBonuses"
    },
    {
      "id": "BATTLE-STAT-106",
      "category": ["戦闘", "ステータス", "21以上ボーナス"],
      "description": "VIT35のphysicalDefenseScore耐性補正が正しいか",
      "formula": "trunc(35×1.1)=38; resistance=trunc(38×0.96^15)=20",
      "expectedRange": { "min": 20, "max": 20 },
      "toleranceBasis": "決定的（21以上ボーナス）",
      "testFile": "CombatStatCalculatorObservationTests.swift",
      "testMethod": "testCombatStatTwentyOneBonuses"
    },
    {
      "id": "BATTLE-STAT-107",
      "category": ["戦闘", "ステータス", "21以上ボーナス"],
      "description": "SPR35のmagicalDefenseScore耐性補正が正しいか",
      "formula": "trunc(35×1.1)=38; resistance=trunc(38×0.96^15)=20",
      "expectedRange": { "min": 20, "max": 20 },
      "toleranceBasis": "決定的（21以上ボーナス）",
      "testFile": "CombatStatCalculatorObservationTests.swift",
      "testMethod": "testCombatStatTwentyOneBonuses"
    },
    {
      "id": "BATTLE-STAT-108",
      "category": ["戦闘", "ステータス", "21以上ボーナス"],
      "description": "LUK35のcriticalChancePercent増幅が正しいか",
      "formula": "critSource=43, raw=6.88→trunc6; bonus=trunc(6×1.04^15)=10",
      "expectedRange": { "min": 10, "max": 10 },
      "toleranceBasis": "決定的（21以上ボーナス）",
      "testFile": "CombatStatCalculatorObservationTests.swift",
      "testMethod": "testCombatStatTwentyOneBonuses"
    },
    {
      "id": "BATTLE-STAT-201",
      "category": ["戦闘", "ステータス", "必殺上限"],
      "description": "criticalChancePercentのcap/capDeltaが適用されるか",
      "formula": "(AGI35+LUK20×2-45)×0.16×10=48; cap=50-10=40 → trunc 40",
      "expectedRange": { "min": 40, "max": 40 },
      "toleranceBasis": "決定的（cap適用）",
      "testFile": "CombatStatCalculatorObservationTests.swift",
      "testMethod": "testCriticalChancePercentCapDelta"
    },
    {
      "id": "BATTLE-STAT-301",
      "category": ["戦闘", "ステータス", "変換"],
      "description": "statConversionPercentでhitScoreに加算されるか",
      "formula": "hitScore=130.8 + physicalAttackScore11×0.5 = 136.3 → trunc 136",
      "expectedRange": { "min": 136, "max": 136 },
      "toleranceBasis": "決定的（変換加算）",
      "testFile": "CombatStatCalculatorObservationTests.swift",
      "testMethod": "testStatConversionPercent"
    },
    {
      "id": "BATTLE-STAT-302",
      "category": ["戦闘", "ステータス", "固定"],
      "description": "statFixedToOneでphysicalAttackScoreとattackCountが1になるか",
      "formula": "fixedToOne(physicalAttackScore, attackCount) → 1",
      "expectedRange": { "min": 1, "max": 1 },
      "toleranceBasis": "決定的（固定値1）",
      "testFile": "CombatStatCalculatorObservationTests.swift",
      "testMethod": "testStatFixedToOne"
    },
    {
      "id": "SKILL-ALIGN-001",
      "category": ["スキル", "整合性", "JSON-TSV"],
      "description": "SkillMaster.json と SkillFamilyExpectations.tsv が一致しているか",
      "formula": "全行一致、不一致数=0",
      "expectedRange": { "min": 0, "max": 0 },
      "toleranceBasis": "決定的（不一致0件）",
      "testFile": "MasterDataLoadRegressionTests.swift",
      "testMethod": "testSkillFamilyExpectationsMatchSkillMasterJSON"
    },
    {
      "id": "SKILL-ALIGN-002",
      "category": ["スキル", "整合性", "TSV-Runtime"],
      "description": "SkillFamilyExpectations.tsv とランタイムペイロードが一致しているか",
      "formula": "全行一致、不一致数=0",
      "expectedRange": { "min": 0, "max": 0 },
      "toleranceBasis": "決定的（不一致0件）",
      "testFile": "MasterDataLoadRegressionTests.swift",
      "testMethod": "testSkillFamilyExpectationsMatchRuntimePayloads"
    }
  ]
}
